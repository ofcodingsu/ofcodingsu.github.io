<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>时光计时器 - 2015.9.1至今</title>
  <!-- 引入Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- 自定义Tailwind配置 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#4A90E2',
            secondary: '#5CB85C',
            text: '#334155',
          },
        },
      }
    }
  </script>
  
  <!-- 自定义工具类 -->
  <style type="text/tailwindcss">
    @layer utilities {
      .text-shadow-light {
        text-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }
      .time-unit {
        @apply flex flex-col items-center justify-center mx-2 sm:mx-4;
      }
    }
  </style>
  
  <style>
    /* 清新渐变背景 */
    body {
      background: linear-gradient(120deg, #f5f7fa 0%, #e4ebf5 100%);
      min-height: 100vh;
    }
    
    /* 数字变化过渡动画 */
    .time-value {
      transition: all 0.2s ease;
    }
    
    .time-value.changing {
      transform: scale(1.05);
      font-weight: 600;
    }
    
    /* 标题动画 */
    .title {
      opacity: 0;
      transform: translateY(-20px);
      animation: fadeDown 0.8s ease-out forwards;
    }
    
    @keyframes fadeDown {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>
<body class="flex flex-col items-center justify-center p-4 overflow-hidden">
  <!-- 标题区域 -->
  <div class="mb-6 sm:mb-10 title">
    <h1 class="text-[clamp(1.5rem,4vw,2.2rem)] font-semibold text-text text-shadow-light text-center">
      我们已经认识
    </h1>
  </div>
  
  <!-- 计时器主体 -->
  <main class="w-full max-w-6xl flex flex-wrap items-center justify-center">
    <!-- 年 -->
    <div class="time-unit">
      <span id="years" class="time-value text-[clamp(2.5rem,8vw,5rem)] font-semibold text-primary text-shadow-light"></span>
      <span class="text-gray-600 text-sm sm:text-base mt-2">年</span>
    </div>
    
    <!-- 月 -->
    <div class="time-unit">
      <span id="months" class="time-value text-[clamp(2.5rem,8vw,5rem)] font-semibold text-primary text-shadow-light"></span>
      <span class="text-gray-600 text-sm sm:text-base mt-2">月</span>
    </div>
    
    <!-- 日 -->
    <div class="time-unit">
      <span id="days" class="time-value text-[clamp(2.5rem,8vw,5rem)] font-semibold text-primary text-shadow-light"></span>
      <span class="text-gray-600 text-sm sm:text-base mt-2">日</span>
    </div>
    
    <!-- 时 -->
    <div class="time-unit">
      <span id="hours" class="time-value text-[clamp(2.5rem,8vw,5rem)] font-semibold text-secondary text-shadow-light"></span>
      <span class="text-gray-600 text-sm sm:text-base mt-2">时</span>
    </div>
    
    <!-- 分 -->
    <div class="time-unit">
      <span id="minutes" class="time-value text-[clamp(2.5rem,8vw,5rem)] font-semibold text-secondary text-shadow-light"></span>
      <span class="text-gray-600 text-sm sm:text-base mt-2">分</span>
    </div>
    
    <!-- 秒 -->
    <div class="time-unit">
      <span id="seconds" class="time-value text-[clamp(2.5rem,8vw,5rem)] font-semibold text-secondary text-shadow-light"></span>
      <span class="text-gray-600 text-sm sm:text-base mt-2">秒</span>
    </div>
  </main>

  <script>
    // 目标起始日期：2015年9月1日
    const startDate = new Date(2015, 8, 1); // 月份从0开始，所以9月是8
    
    // DOM元素
    const yearsEl = document.getElementById('years');
    const monthsEl = document.getElementById('months');
    const daysEl = document.getElementById('days');
    const hoursEl = document.getElementById('hours');
    const minutesEl = document.getElementById('minutes');
    const secondsEl = document.getElementById('seconds');
    
    // 存储上一次的值，用于检测变化
    let previousValues = {
      years: 0,
      months: 0,
      days: 0,
      hours: 0,
      minutes: 0,
      seconds: 0
    };
    
    // 计算两个日期之间的年、月、日差异
    function calculateDateDifference(start, end) {
      // 复制日期对象以避免修改原始值
      const startCopy = new Date(start);
      const endCopy = new Date(end);
      
      // 计算年数
      let years = endCopy.getFullYear() - startCopy.getFullYear();
      
      // 计算月数
      let months = endCopy.getMonth() - startCopy.getMonth();
      
      // 计算天数
      let days = endCopy.getDate() - startCopy.getDate();
      
      // 计算小时、分钟、秒数
      let hours = endCopy.getHours() - startCopy.getHours();
      let minutes = endCopy.getMinutes() - startCopy.getMinutes();
      let seconds = endCopy.getSeconds() - startCopy.getSeconds();
      
      // 调整负数情况
      if (seconds < 0) {
        minutes--;
        seconds += 60;
      }
      
      if (minutes < 0) {
        hours--;
        minutes += 60;
      }
      
      if (hours < 0) {
        days--;
        hours += 24;
      }
      
      if (days < 0) {
        months--;
        // 获取上一个月的天数
        startCopy.setMonth(startCopy.getMonth() + 1);
        startCopy.setDate(0);
        days += startCopy.getDate();
      }
      
      if (months < 0) {
        years--;
        months += 12;
      }
      
      return {
        years,
        months,
        days,
        hours: hours < 0 ? 0 : hours,
        minutes: minutes < 0 ? 0 : minutes,
        seconds: seconds < 0 ? 0 : seconds
      };
    }
    
    // 更新计时器显示
    function updateTimer() {
      const now = new Date();
      const diff = calculateDateDifference(startDate, now);
      
      // 格式化数字为两位数（小于10的前面补0）
      const formatNumber = (num) => num.toString().padStart(2, '0');
      
      // 更新各时间单位显示，并添加变化动画
      updateTimeUnit('years', diff.years, formatNumber);
      updateTimeUnit('months', diff.months, formatNumber);
      updateTimeUnit('days', diff.days, formatNumber);
      updateTimeUnit('hours', diff.hours, formatNumber);
      updateTimeUnit('minutes', diff.minutes, formatNumber);
      updateTimeUnit('seconds', diff.seconds, formatNumber);
    }
    
    // 更新单个时间单位显示
    function updateTimeUnit(unit, value, formatter) {
      const el = document.getElementById(unit);
      const formattedValue = formatter(value);
      
      // 如果值发生变化，添加动画效果
      if (previousValues[unit] !== value) {
        el.classList.add('changing');
        setTimeout(() => el.classList.remove('changing'), 200);
        previousValues[unit] = value;
      }
      
      el.textContent = formattedValue;
    }
    
    // 初始化并启动计时器
    function initTimer() {
      // 立即更新一次
      updateTimer();
      
      // 每秒更新一次
      setInterval(updateTimer, 1000);
    }
    
    // 页面加载完成后初始化
    document.addEventListener('DOMContentLoaded', initTimer);
  </script>
</body>
</html>
